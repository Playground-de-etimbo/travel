@import "tailwindcss";

@theme {
  /* Midnight Map - Light Mode (root) */
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(230 15% 15%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(230 15% 15%);
  --color-primary: hsl(230 68% 50%);
  --color-primary-foreground: hsl(0 0% 100%);
  --color-secondary: hsl(230 20% 92%);
  --color-secondary-foreground: hsl(230 15% 15%);
  --color-accent: hsl(160 62% 50%);
  --color-accent-foreground: hsl(0 0% 100%);
  --color-muted: hsl(230 20% 92%);
  --color-muted-foreground: hsl(230 10% 40%);
  --color-border: hsl(230 25% 88%);
  --color-input: hsl(230 25% 88%);
  --color-ring: hsl(230 68% 50%);
  --radius: 0.5rem;
  --radius-lg: 0.5rem;
  --radius-md: calc(0.5rem - 2px);
  --radius-sm: calc(0.5rem - 4px);

  /* Section Header Gradients - Light Mode */
  --gradient-recommendations-start: hsl(18 94% 48%); /* #ea580c */
  --gradient-recommendations-end: hsl(22 94% 52%); /* #f97316 */
  --gradient-postcard-start: hsl(160 84% 39%); /* #10b981 */
  --gradient-postcard-end: hsl(160 84% 44%); /* #059669 */
  --gradient-builtwith-start: hsl(38 92% 50%); /* #f59e0b */
  --gradient-builtwith-end: hsl(32 95% 44%); /* #d97706 */
  --gradient-directory-start: hsl(239 84% 60%); /* #4f46e5 */
  --gradient-directory-end: hsl(271 76% 53%); /* #7c3aed */
  --gradient-beento-start: hsl(333 75% 48%); /* #db2777 */
  --gradient-beento-end: hsl(333 81% 60%); /* #ec4899 */
  --gradient-wanttogo-start: hsl(188 85% 32%); /* #0891b2 */
  --gradient-wanttogo-end: hsl(187 85% 43%); /* #06b6d4 */
  --gradient-stats-start: hsl(215 20% 37%); /* #475569 */
  --gradient-stats-end: hsl(215 19% 47%); /* #64748b */

  /* Section Eyebrow Colors */
  --eyebrow-recommendations: hsl(22 94% 52%);
  --eyebrow-postcard: hsl(160 84% 39%);
  --eyebrow-builtwith: hsl(38 92% 50%);
  --eyebrow-directory: hsl(271 76% 53%);
  --eyebrow-beento: hsl(333 81% 60%);
  --eyebrow-wanttogo: hsl(187 85% 43%);
  --eyebrow-stats: hsl(215 19% 47%);

  /* Search Panel specific */
  --color-panel-border: hsl(160 62% 50%);
  --color-panel-shadow: hsl(160 62% 50%);
  --panel-border-width: 5px;
  --panel-shadow-blur: 16px;

  /* Stats bar */
  --color-stats-text: hsl(230 10% 40%);

  /* Map colors - Light Mode */
  --map-ocean: oklch(81% 0.05 230); /* Light sky blue */
  --map-unvisited: oklch(98% 0.01 230); /* Very light gray */
  --map-unvisited-border: oklch(85% 0.02 230); /* Light gray border */
  --map-been-to: oklch(61% 0.15 191); /* Teal */
  --map-been-to-border: oklch(48% 0.13 191); /* Darker teal */
  --map-hover: oklch(96% 0.01 230); /* Hover gray */
  --map-hover-border: oklch(75% 0.03 230); /* Hover border */
  --map-coastline: oklch(100% 0 0); /* White */
  --map-spotlight: oklch(60% 0.25 250); /* Blue spotlight */

  /* Autocomplete */
  --autocomplete-max-height: 400px;
  --autocomplete-item-height: 42px;
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Midnight Map - Dark Mode */
    --color-background: hsl(230 28% 7%);
    --color-foreground: hsl(225 20% 90%);
    --color-card: hsl(230 25% 10%);
    --color-card-foreground: hsl(225 20% 90%);
    --color-primary: hsl(230 68% 56%);
    --color-primary-foreground: hsl(0 0% 100%);
    --color-secondary: hsl(230 20% 15%);
    --color-secondary-foreground: hsl(225 20% 90%);
    --color-accent: hsl(160 62% 50%);
    --color-accent-foreground: hsl(0 0% 100%);
    --color-muted: hsl(230 20% 15%);
    --color-muted-foreground: hsl(230 10% 60%);
    --color-border: hsl(230 20% 20%);
    --color-input: hsl(230 20% 20%);
    --color-ring: hsl(230 68% 56%);

    /* Section Header Gradients - Dark Mode (slightly brighter for contrast) */
    --gradient-recommendations-start: hsl(18 94% 55%);
    --gradient-recommendations-end: hsl(22 94% 60%);
    --gradient-postcard-start: hsl(160 84% 45%);
    --gradient-postcard-end: hsl(160 84% 50%);
    --gradient-builtwith-start: hsl(38 92% 55%);
    --gradient-builtwith-end: hsl(32 95% 50%);
    --gradient-directory-start: hsl(239 84% 65%);
    --gradient-directory-end: hsl(271 76% 60%);
    --gradient-beento-start: hsl(333 75% 55%);
    --gradient-beento-end: hsl(333 81% 65%);
    --gradient-wanttogo-start: hsl(188 85% 40%);
    --gradient-wanttogo-end: hsl(187 85% 50%);
    --gradient-stats-start: hsl(215 20% 55%);
    --gradient-stats-end: hsl(215 19% 65%);

    /* Section Eyebrow Colors - Dark Mode */
    --eyebrow-recommendations: hsl(22 94% 60%);
    --eyebrow-postcard: hsl(160 84% 45%);
    --eyebrow-builtwith: hsl(38 92% 55%);
    --eyebrow-directory: hsl(271 76% 60%);
    --eyebrow-beento: hsl(333 81% 65%);
    --eyebrow-wanttogo: hsl(187 85% 50%);
    --eyebrow-stats: hsl(215 19% 65%);

    /* Search Panel specific */
    --color-panel-border: hsl(160 62% 55%);
    --color-panel-shadow: hsl(160 62% 55%);
    --color-stats-text: hsl(230 10% 60%);

    /* Map colors - Dark Mode */
    --map-ocean: oklch(25% 0.04 230); /* Dark blue-gray ocean */
    --map-unvisited: oklch(30% 0.03 230); /* Dark gray */
    --map-unvisited-border: oklch(35% 0.04 230); /* Slightly lighter border */
    --map-been-to: oklch(61% 0.15 191); /* Teal (same) */
    --map-been-to-border: oklch(70% 0.16 191); /* Lighter teal for contrast */
    --map-hover: oklch(35% 0.03 230); /* Hover dark gray */
    --map-hover-border: oklch(45% 0.04 230); /* Hover border */
    --map-coastline: oklch(40% 0.04 230); /* Dark coastline */
    --map-spotlight: oklch(65% 0.25 250); /* Brighter blue spotlight */
  }
}

body {
  background: var(--color-background);
  color: var(--color-foreground);
  /* iOS safe area insets for fluid edge-to-edge design */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Interactive elements cursor styling */
button:not(:disabled),
[role="button"]:not([disabled]),
a,
label,
select,
[onclick] {
  cursor: pointer;
}

/* Map country color transitions (scoped to react-simple-maps Geography elements) */
.rsm-geography {
  transition-property: fill, stroke;
  transition-duration: 300ms;
  transition-timing-function: ease-in-out;
}

@keyframes map-add-pulse {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(1.04);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes map-add-toast {
  0% {
    opacity: 0;
    transform: translate(-50%, 4px);
  }
  15% {
    opacity: 1;
    transform: translate(-50%, -6px);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -18px);
  }
}

@keyframes map-add-toast-down {
  0% {
    opacity: 0;
    transform: translate(-50%, -4px);
  }
  15% {
    opacity: 1;
    transform: translate(-50%, 6px);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, 18px);
  }
}

.map-add-pulse {
  animation: map-add-pulse 450ms ease-out;
  transform-box: fill-box;
  transform-origin: center;
}

.map-toast {
  position: absolute;
  z-index: 30;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: 0.2px;
  pointer-events: none;
  animation: map-add-toast 2200ms ease-out forwards;
}

.map-toast--down {
  animation: map-add-toast-down 2200ms ease-out forwards;
}

.map-toast--add {
  background: color-mix(in oklch, white, transparent 5%);
  color: oklch(47.73% 0.129 191.636);
  box-shadow: 0 8px 20px color-mix(in oklch, oklch(47.73% 0.129 191.636), transparent 75%);
}

.map-toast--remove {
  background: color-mix(in oklch, white, transparent 5%);
  color: oklch(57% 0.208 25);
  box-shadow: 0 8px 20px color-mix(in oklch, oklch(57% 0.208 25), transparent 75%);
}

/* Allow clicks to pass through ZoomableGroup's overlay rect to Geography elements */
svg g > g > rect[fill="transparent"] {
  pointer-events: none !important;
}

/* Logo animations - one-time on load */
@keyframes earth-slow-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(45deg);
  }
}

/* Earth slow spin on load (desktop only - mobile shows final state) */
.earth-rotate {
  animation: earth-slow-spin 2.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Sun orbits 90Â° from NW to SE along earth's horizon (desktop only - mobile shows final state) */
.sun-orbit {
  animation: sun-arc 1.8s cubic-bezier(0.42, 0, 0.58, 1) 0.3s forwards;
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Ensure rotation happens around the earth center */
@keyframes sun-arc {
  from {
    transform: translate(28px, 66px) rotate(0deg);
  }
  to {
    transform: translate(28px, 66px) rotate(90deg);
  }
}

/* Autocomplete animations */
@keyframes autocompleteSlideUp {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes countryChipEnter {
  0% {
    opacity: 0;
    transform: scale(0.92) translateY(6px);
  }
  60% {
    transform: scale(1.03) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.autocomplete-open {
  animation: autocompleteSlideUp 150ms ease-out;
}

.country-chip-enter {
  animation: countryChipEnter 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Recommendation card fade in animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.recommendation-card {
  animation: fadeInUp 0.5s ease-out;
  animation-fill-mode: both;
}

.recommendation-card:nth-child(1) { animation-delay: 0.1s; }
.recommendation-card:nth-child(2) { animation-delay: 0.2s; }
.recommendation-card:nth-child(3) { animation-delay: 0.3s; }
.recommendation-card:nth-child(4) { animation-delay: 0.4s; }
.recommendation-card:nth-child(5) { animation-delay: 0.5s; }
.recommendation-card:nth-child(6) { animation-delay: 0.6s; }
.recommendation-card:nth-child(7) { animation-delay: 0.7s; }
.recommendation-card:nth-child(8) { animation-delay: 0.8s; }

/* Accordion animations */
@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

.animate-accordion-down {
  animation: accordion-down 200ms ease-out;
}

.animate-accordion-up {
  animation: accordion-up 200ms ease-out;
}

/* Postcard paper - base styles + texture */
.postcard-paper {
  position: relative;
  background: #ffffff;
  box-shadow: 0 4px 20px rgba(0,0,0,0.06);
}

/* Subtle paper texture overlay */
.postcard-paper::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  opacity: 0.025;
  mix-blend-mode: multiply;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

/* Postcard section entrance */
@keyframes postcardSectionEnter {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.postcard-section-enter {
  animation: postcardSectionEnter 0.6s ease-out;
}

/* Postcard card entrance (staggered) */
@keyframes postcardCardEnter {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.97);
  }
  60% {
    transform: translateY(-4px) scale(1.01);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.postcard-card-enter {
  animation: postcardCardEnter 0.7s ease-out both;
}

.postcard-card-enter:nth-child(1) {
  animation-delay: 0.2s;
}

.postcard-card-enter:nth-child(2) {
  animation-delay: 0.45s;
}

/* Floating pill nav animations */
@keyframes pillSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pillSlideDown {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(20px);
  }
}

.pill-slide-up {
  animation: pillSlideUp 0.3s ease-out both;
}

.pill-slide-down {
  animation: pillSlideDown 0.2s ease-in both;
}

/* Section Header Gradient Text Utilities */
.gradient-text-recommendations {
  background: linear-gradient(135deg, var(--gradient-recommendations-start) 0%, var(--gradient-recommendations-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-postcard {
  background: linear-gradient(135deg, var(--gradient-postcard-start) 0%, var(--gradient-postcard-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-builtwith {
  background: linear-gradient(135deg, var(--gradient-builtwith-start) 0%, var(--gradient-builtwith-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-directory {
  background: linear-gradient(135deg, var(--gradient-directory-start) 0%, var(--gradient-directory-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-beento {
  background: linear-gradient(135deg, var(--gradient-beento-start) 0%, var(--gradient-beento-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-wanttogo {
  background: linear-gradient(135deg, var(--gradient-wanttogo-start) 0%, var(--gradient-wanttogo-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-stats {
  background: linear-gradient(135deg, var(--gradient-stats-start) 0%, var(--gradient-stats-end) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Eyebrow text colors - use theme variables */
.eyebrow-recommendations { color: var(--eyebrow-recommendations); }
.eyebrow-postcard { color: var(--eyebrow-postcard); }
.eyebrow-builtwith { color: var(--eyebrow-builtwith); }
.eyebrow-directory { color: var(--eyebrow-directory); }
.eyebrow-beento { color: var(--eyebrow-beento); }
.eyebrow-wanttogo { color: var(--eyebrow-wanttogo); }
.eyebrow-stats { color: var(--eyebrow-stats); }

/* Sky Wrapper - Contains sunset/dusk gradient */
.sky-wrapper {
  min-height: 100vh;
  overflow: visible;
}

/* Recommendations Sky Background - Light Mode (Sunset) */
.sky-gradient {
  border-top: 6px solid hsl(20 85% 65%);
  background:
    radial-gradient(circle at 85% 15%,
      rgba(255, 200, 100, 0.4) 0%,
      rgba(255, 140, 60, 0.3) 8%,
      rgba(255, 100, 80, 0.15) 15%,
      transparent 25%
    ),
    linear-gradient(180deg,
      hsl(20 100% 85%) 0%,
      hsl(25 100% 88%) 15%,
      hsl(30 100% 92%) 30%,
      hsl(35 100% 95%) 50%,
      hsl(40 100% 97%) 70%,
      hsl(0 0% 100%) 100%
    );
}

/* Dark Mode Sky - Deep Dusk/Twilight */
@media (prefers-color-scheme: dark) {
  .sky-gradient {
    border-top-color: hsl(240 50% 35%);
    background:
      radial-gradient(circle at 85% 15%,
        rgba(100, 120, 200, 0.3) 0%,
        rgba(80, 90, 180, 0.2) 8%,
        rgba(60, 70, 140, 0.1) 15%,
        transparent 25%
      ),
      linear-gradient(180deg,
        hsl(240 45% 15%) 0%,
        hsl(245 40% 18%) 20%,
        hsl(250 35% 22%) 40%,
        hsl(255 30% 25%) 60%,
        hsl(230 28% 7%) 100%
      );
  }
}

/* Celestial Body Container */
.celestial-body {
  top: 8%;
  right: 15%;
  width: 120px;
  height: 120px;
}

/* Sun Element - Light Mode */
.sun-element {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle,
    rgba(255, 230, 150, 0.9) 0%,
    rgba(255, 220, 140, 0.85) 15%,
    rgba(255, 210, 130, 0.75) 25%,
    rgba(255, 200, 120, 0.65) 35%,
    rgba(255, 180, 100, 0.45) 50%,
    rgba(255, 160, 80, 0.25) 65%,
    rgba(255, 140, 60, 0.12) 80%,
    transparent 100%);
  border-radius: 50%;
  filter: blur(3px);
  opacity: 0.85;
  display: block;
}

.sun-core {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  background: radial-gradient(circle,
    rgba(255, 252, 235, 1) 0%,
    rgba(255, 248, 220, 0.98) 20%,
    rgba(255, 240, 200, 0.96) 35%,
    rgba(255, 230, 170, 0.92) 50%,
    rgba(255, 210, 140, 0.85) 65%,
    rgba(255, 190, 110, 0.75) 80%,
    rgba(255, 170, 90, 0.6) 100%);
  border-radius: 50%;
  filter: blur(0.5px);
  box-shadow:
    0 0 20px rgba(255, 220, 120, 0.7),
    0 0 40px rgba(255, 200, 100, 0.5),
    0 0 60px rgba(255, 180, 80, 0.3);
}

/* Hide sun in dark mode, show moon */
@media (prefers-color-scheme: dark) {
  .sun-element {
    display: none;
  }
}

/* Moon Element - Dark Mode Only */
.moon-element {
  position: absolute;
  inset: 0;
  display: none;
  opacity: 0.9;
}

@media (prefers-color-scheme: dark) {
  .moon-element {
    display: block;
  }
}

.moon-surface {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80px;
  height: 80px;
  background: radial-gradient(circle at 35% 35%,
    hsl(50 20% 88%) 0%,
    hsl(48 18% 84%) 15%,
    hsl(45 16% 80%) 25%,
    hsl(43 14% 75%) 35%,
    hsl(40 12% 70%) 45%,
    hsl(38 10% 65%) 60%,
    hsl(36 9% 60%) 75%,
    hsl(35 8% 55%) 100%
  );
  border-radius: 50%;
  box-shadow:
    0 0 30px rgba(210, 220, 235, 0.45),
    0 0 60px rgba(190, 210, 230, 0.3),
    0 0 90px rgba(170, 200, 225, 0.15),
    inset -8px -8px 16px rgba(0, 0, 0, 0.25),
    inset 2px 2px 8px rgba(255, 255, 255, 0.1);
  filter: blur(0.5px);
}

/* Moon craters */
.crater {
  position: absolute;
  background: radial-gradient(circle, rgba(0, 0, 0, 0.3) 0%, transparent 70%);
  border-radius: 50%;
}

.crater-1 {
  width: 12px;
  height: 12px;
  top: 25%;
  left: 30%;
}

.crater-2 {
  width: 8px;
  height: 8px;
  top: 55%;
  left: 60%;
}

.crater-3 {
  width: 10px;
  height: 10px;
  top: 65%;
  left: 25%;
}

/* Starfield - Dark Mode Only */
.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  animation: twinkle 3s ease-in-out infinite;
  box-shadow: 0 0 3px rgba(255, 255, 255, 0.8);
}

@keyframes twinkle {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* Postcard loading modal animations */
@keyframes emoji-pop {
  0%   { transform: scale(0) translateY(8px); opacity: 0; }
  50%  { transform: scale(1.25) translateY(-4px); opacity: 1; }
  100% { transform: scale(1) translateY(0); opacity: 1; }
}

@keyframes phrase-fade {
  0%, 100% { opacity: 0; transform: translateY(4px); }
  15%, 85% { opacity: 1; transform: translateY(0); }
}

.postcard-emoji-pop {
  animation: emoji-pop 0.4s ease-out both;
}

.postcard-phrase-fade {
  animation: phrase-fade 1.2s ease-in-out both;
}
